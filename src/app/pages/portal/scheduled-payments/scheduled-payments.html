<div class="container-fluid p-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="m-0 text-primary">Scheduled Payments</h2>
    <button mat-stroked-button color="primary" routerLink="/portal/pay-bill">
      <mat-icon>add</mat-icon> Schedule New Bill
    </button>
  </div>

  <mat-card class="mat-elevation-z2">
    <mat-card-content class="p-0">
      <table mat-table [dataSource]="scheduledBills" class="w-100">
        
        <ng-container matColumnDef="scheduledDate">
          <th mat-header-cell *matHeaderCellDef> Scheduled Date </th>
          <td mat-cell *matCellDef="let bill" class="fw-bold text-primary"> 
            {{ bill.scheduledDate | date:'mediumDate' }} 
          </td>
        </ng-container>

        <ng-container matColumnDef="biller">
          <th mat-header-cell *matHeaderCellDef> Biller / Category </th>
          <td mat-cell *matCellDef="let bill"> 
            <strong>{{ bill.billerName }}</strong><br>
            <small class="text-muted">{{ bill.billerCategory }} (ID: {{ bill.consumerNumber }})</small>
          </td>
        </ng-container>

        <ng-container matColumnDef="fromAccount">
          <th mat-header-cell *matHeaderCellDef> From Account </th>
          <td mat-cell *matCellDef="let bill"> {{ bill.fromAccount }} </td>
        </ng-container>

        <ng-container matColumnDef="amount">
          <th mat-header-cell *matHeaderCellDef class="text-end"> Amount </th>
          <td mat-cell *matCellDef="let bill" class="text-end text-danger fw-bold"> 
            - â‚¹{{ bill.amount | number:'1.2-2' }} 
          </td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef class="text-center"> Action </th>
          <td mat-cell *matCellDef="let bill" class="text-center">
            <button mat-icon-button color="warn" matTooltip="Cancel Payment" (click)="cancelPayment(bill.id)">
              <mat-icon>cancel</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell text-center p-5 text-muted" colspan="5">
            <mat-icon class="fs-1" style="width: 40px; height: 40px;">event_busy</mat-icon>
            <h5 class="mt-2">No scheduled payments found.</h5>
          </td>
        </tr>
      </table>
    </mat-card-content>
  </mat-card>
</div>